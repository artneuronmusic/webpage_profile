<div class="b-example-divider"></div>
<div class="container px-4 py-5" id="featured-3">
   
    <h2 class="pb-2 border-bottom">Reviews</h2>
    <div class="row g-4 py-5 row-cols-1 row-cols-lg-3">
        <% if (locals.reviews && reviews.length > 0) { %>
            <% reviews.forEach((review, index) => { %>
                <div class="feature col">
                    <!-- Change the img -->
                    <img class="bd-placeholder-img rounded-circle" src="images/shopping.jpg" alt="shopping" width="100" height="100">
                    <!-- Display the user's name -->
                    <h3 class="fs-2 text-body-emphasis"><%= review.name %></h3>
                    <!-- Display the review message -->
                    <p><%= review.message %></p>
                    <!-- Edit Button to trigger modal -->
                    <button type="button" class="btn btn-warning" data-bs-toggle="modal" data-bs-target="#editReviewModal" data-index="<%= index %>" data-name="<%= review.name %>" data-email="<%= review.email %>" data-message="<%= review.message %>">Edit</button>
                    <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#deleteReviewModal" data-index="<%= index %>" data-name="<%= review.name %>">Delete</button>
                </div>
            <% }) %>
        <% } else { %>
            <p>No reviews yet. Be the first to leave a review!</p>
        <% } %>
    </div>
</div>

<!-- Edit Review Modal -->
<div class="modal fade" id="editReviewModal" tabindex="-1" aria-labelledby="editReviewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="editReviewModalLabel">Edit Review</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="editReviewForm" action="/edit/" method="POST">
                    <input type="hidden" name="_method" value="PUT">
                    <div class="mb-3">
                        <label for="editName" class="form-label">Name</label>
                        <input type="text" class="form-control" id="editName" name="name" required>
                    </div>
                    <div class="mb-3">
                        <label for="editEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="editEmail" name="email" required>
                    </div>
                    <div class="mb-3">
                        <label for="editMessage" class="form-label">Message</label>
                        <textarea class="form-control" id="editMessage" name="message" required></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary">Save changes</button>
                </form>
            </div>
        </div>
    </div>
</div>
<!-- pop up for deleting Review Modal -->

<div class="modal fade" id="deleteReviewModal" tabindex="-1" aria-labelledby="deleteReviewModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="deleteReviewModalLabel">Hi!</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="deleteReviewForm" action="/delete/" method="POST">
                    <input type="hidden" name="_method" value="DELETE">
                    <input type="hidden" id="deleteIndex" name="index">
                    <p>do you want to delete it?</p>
                    <button type="submit" class="btn btn-primary">Yes</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">No</button>
                </form>
            </div>
        </div>
    </div>
</div>